api:
    resources:
        Pintushi\Bundle\CoreBundle\Entity\Organization:
            scope: pintushi
            normalization_context:
                groups: [Organization]
            validation_groups:  ["pintushi"]
            route_prefix: /admin
            form: App\Form\Type\OrganizationType
            repository_class: 'Pintushi\Bundle\OrganizationBundle\Repository\OrganizationRepository'
            operations:
                create:
                    action: create
                    access_control: is_granted('pintushi_organization_create')
                    normalization_context:
                        groups: [Organization, Address, ShippingMethod]
                switch_organization:
                    action: view
                    path: /switch-organization/{id}
                    controller: Pintushi\Bundle\SecurityBundle\Controller\SwitchOrganizationAction
                    defaults:
                        id: 0
                index:
                    action: index
                    access_control: is_granted('pintushi_organization_view')
                    normalization_context:
                        groups: [Organization, Default]
                update:
                    action: update
                    access_control: is_granted('pintushi_organization_edit', object)
                    normalization_context:
                        groups: [Organization, Address, ShippingMethod]
                view:
                    action: view
                    access_control: is_granted('pintushi_organization_view', object)
                    normalization_context:
                        groups: [Organization, Address, ShippingMethod]
                get_profile:
                    action: view
                    path: '/profile'
                    resource_provider: 'App\ResourceProvider\GetOrganization'
                    normalization_context:
                        groups: [Organization, Address, ShippingMethod]
                update_profile:
                    action: update
                    path: '/profile'
                    resource_provider: 'App\ResourceProvider\GetOrganization'
                    access_control: is_granted('pintushi_organization_update_profile', object)
                    form: 'App\Form\Type\GenericOrganizationType'
                    normalization_context:
                        groups: [Organization, Address, ShippingMethod]
                delete:
                    action: delete
                    access_control: is_granted('pintushi_organization_delete', object)
